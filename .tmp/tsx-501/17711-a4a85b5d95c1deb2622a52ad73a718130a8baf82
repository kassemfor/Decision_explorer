{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{stronglyConnectedComponents}from\"./scc\";function analyzeGraph(graph,options={}){const outStrength={};const inStrength={};for(const n of graph.nodes){outStrength[n.id]=0;inStrength[n.id]=0}for(const e of graph.edges){const w=Math.max(0,e.strength??1);outStrength[e.sourceId]=(outStrength[e.sourceId]??0)+w;inStrength[e.targetId]=(inStrength[e.targetId]??0)+w}const drivers=graph.nodes.map(n=>({nodeId:n.id,score:outStrength[n.id]??0})).sort((a,b)=>b.score-a.score).slice(0,20);const outcomes=graph.nodes.map(n=>({nodeId:n.id,score:inStrength[n.id]??0})).sort((a,b)=>b.score-a.score).slice(0,20);const sccs=stronglyConnectedComponents(graph);const loops=sccs.filter(c=>c.length>1).map(c=>({nodes:c,size:c.length})).sort((a,b)=>b.size-a.size).slice(0,50);const clustering=options.clustering??\"tags\";const clusters={};if(clustering===\"none\"){for(const n of graph.nodes)clusters[n.id]=\"cluster:all\"}else{for(const n of graph.nodes){const tag=(n.tags??[])[0]??\"__untagged__\";clusters[n.id]=`tag:${tag}`}}return{scores:{outStrength,inStrength},drivers,outcomes,clusters,loops}}__name(analyzeGraph,\"analyzeGraph\");export{analyzeGraph};\n","warnings":[],"map":{"version":3,"mappings":"kHACA,OAAS,gCAAmC,QAErC,SAAS,aAAa,MAAc,QAA2B,CAAC,EAAmB,CACtF,MAAM,YAAsC,CAAC,EAC7C,MAAM,WAAqC,CAAC,EAE5C,UAAW,KAAK,MAAM,MAAO,CACzB,YAAY,EAAE,EAAE,EAAI,EACpB,WAAW,EAAE,EAAE,EAAI,CACvB,CAEA,UAAW,KAAK,MAAM,MAAO,CACzB,MAAM,EAAI,KAAK,IAAI,EAAG,EAAE,UAAY,CAAC,EACrC,YAAY,EAAE,QAAQ,GAAK,YAAY,EAAE,QAAQ,GAAK,GAAK,EAC3D,WAAW,EAAE,QAAQ,GAAK,WAAW,EAAE,QAAQ,GAAK,GAAK,CAC7D,CAEA,MAAM,QAAU,MAAM,MACjB,IAAI,IAAM,CAAE,OAAQ,EAAE,GAAI,MAAQ,YAAY,EAAE,EAAE,GAAK,CAAG,EAAE,EAC5D,KAAK,CAAC,EAAG,IAAM,EAAE,MAAQ,EAAE,KAAK,EAChC,MAAM,EAAG,EAAE,EAEhB,MAAM,SAAW,MAAM,MAClB,IAAI,IAAM,CAAE,OAAQ,EAAE,GAAI,MAAQ,WAAW,EAAE,EAAE,GAAK,CAAG,EAAE,EAC3D,KAAK,CAAC,EAAG,IAAM,EAAE,MAAQ,EAAE,KAAK,EAChC,MAAM,EAAG,EAAE,EAEhB,MAAM,KAAO,4BAA4B,KAAK,EAC9C,MAAM,MAAQ,KACT,OAAO,GAAK,EAAE,OAAS,CAAC,EACxB,IAAI,IAAM,CAAE,MAAO,EAAG,KAAM,EAAE,MAAO,EAAE,EACvC,KAAK,CAAC,EAAG,IAAM,EAAE,KAAO,EAAE,IAAI,EAC9B,MAAM,EAAG,EAAE,EAEhB,MAAM,WAAa,QAAQ,YAAc,OACzC,MAAM,SAAmC,CAAC,EAC1C,GAAI,aAAe,OAAQ,CACvB,UAAW,KAAK,MAAM,MAAO,SAAS,EAAE,EAAE,EAAI,aAClD,KAAO,CACH,UAAW,KAAK,MAAM,MAAO,CACzB,MAAM,KAAO,EAAE,MAAQ,CAAC,GAAG,CAAC,GAAK,eACjC,SAAS,EAAE,EAAE,EAAI,OAAO,GAAG,EAC/B,CACJ,CAEA,MAAO,CACH,OAAQ,CAAE,YAAa,UAAW,EAClC,QACA,SACA,SACA,KACJ,CACJ,CAlDgB","names":[],"ignoreList":[],"sources":["/Users/admin/Decision_explorer/packages/graph-core/src/analyze.ts"],"sourcesContent":[null]}}